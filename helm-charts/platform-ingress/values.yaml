# ==============================================================================
# Platform Ingress - Default Values
# ==============================================================================
# SUBDOMAIN STRATEGY: Each service gets its own subdomain
# Example:
#   - Keycloak:   https://keycloak.domain.com
#   - ArgoCD:     https://argocd.domain.com
#   - Grafana:    https://grafana.domain.com
#   - Prometheus: https://prometheus.domain.com
# ==============================================================================

# Base domain configuration (subdomains will be prepended)
domain: local

# TLS configuration
tls:
  enabled: true
  # For wildcard certificates, use: *.domain
  secretName: platform-tls

# Cert-manager configuration
certManager:
  enabled: true
  # Self-signed issuer configuration
  selfSigned:
    enabled: true
    issuerName: selfsigned-issuer
  # CA issuer (created from self-signed)
  caIssuer:
    enabled: true
    issuerName: platform-ca-issuer
    secretName: platform-ca-secret

# Ingress controller configuration
ingress:
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
    nginx.ingress.kubernetes.io/proxy-buffers-number: "4"

# ==============================================================================
# Service Routes Configuration (Subdomain Strategy)
# ==============================================================================

# Keycloak Identity Provider
keycloak:
  enabled: true
  subdomain: keycloak
  serviceName: keycloak
  serviceNamespace: keycloak
  servicePort: 80
  annotations:
    nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
    nginx.ingress.kubernetes.io/proxy-buffers-number: "4"

# ArgoCD GitOps Dashboard
argocd:
  enabled: true
  subdomain: argocd
  serviceName: argocd-server
  serviceNamespace: argocd
  servicePort: 80
  annotations: {}

# Grafana Dashboard
grafana:
  enabled: true
  subdomain: grafana
  serviceName: prometheus-grafana
  serviceNamespace: monitoring
  servicePort: 80
  annotations: {}

# Prometheus (with basic auth)
prometheus:
  enabled: true
  subdomain: prometheus
  serviceName: prometheus-kube-prometheus-prometheus
  serviceNamespace: monitoring
  servicePort: 9090
  basicAuth:
    enabled: true
    secretName: prometheus-basic-auth
    username: admin
    password: ""
  annotations:
    nginx.ingress.kubernetes.io/auth-type: "basic"
    nginx.ingress.kubernetes.io/auth-secret: "prometheus-basic-auth"
    nginx.ingress.kubernetes.io/auth-realm: "Prometheus - Authentication Required"

# ==============================================================================
# External Secrets Configuration
# ==============================================================================
externalSecrets:
  enabled: false
  apiVersion: "v1beta1"
  secretStore:
    name: cluster-secret-store
    kind: ClusterSecretStore
  appSecretKey: "cloudflare"

# ==============================================================================
# Let's Encrypt Configuration
# ==============================================================================
letsEncrypt:
  enabled: false
  email: ""
  server: https://acme-v02.api.letsencrypt.org/directory
  cloudflare:
    enabled: false
    secretKey: "cloudflare"
    apiTokenSecretRef:
      name: cloudflare-api-token
      key: api-token
